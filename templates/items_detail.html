{% extends "signedInBase.html" %}

{% block title %}{{ item.name }} – ShareSpace{% endblock %}
{% block content %}

<div class="max-w-5xl mx-auto">

    <!-- Back Button -->
    <div class="mb-6">
        <a href="{{ url_for('browse_items') }}"
           class="text-primary font-semibold hover:underline">
            ← Back to Browse
        </a>
    </div>

    <div class="bg-white dark:bg-dark-2 rounded-2xl shadow-xl overflow-hidden">

        <!-- Image Section -->
        <div class="h-96 bg-gray-100 dark:bg-dark flex items-center justify-center">
            {% if item.image %}
                <img src="{{ url_for('static', filename='uploads/' + item.image) }}"
                     alt="{{ item.name }}"
                     class="w-full h-full object-cover">
            {% else %}
                <i class="fas fa-box text-7xl text-gray-400"></i>
            {% endif %}
        </div>

        <!-- Content Section -->
        <div class="p-8">

            <!-- Title & Category -->
            <div class="flex justify-between items-start flex-wrap gap-4">
                <div>
                    <span class="text-xs text-primary font-semibold uppercase tracking-wide">
                        {{ item.category }}
                    </span>

                    <h1 class="text-3xl font-bold text-dark dark:text-white mt-2">
                        {{ item.name }}
                    </h1>
                </div>

                <span class="px-4 py-2 bg-gray-100 dark:bg-dark-3 rounded-lg text-sm font-medium">
                    {{ item.condition }}
                </span>
            </div>

            <!-- Description -->
            <div class="mt-6">
                <h3 class="text-lg font-semibold text-dark dark:text-white mb-2">
                    Description
                </h3>
                <p class="text-body-color dark:text-dark-6 leading-relaxed">
                    {{ item.description }}
                </p>
            </div>

            <!-- Owner Info -->
            <div class="mt-8 grid grid-cols-1 md:grid-cols-2 gap-6">

                <div class="bg-gray-1 dark:bg-dark rounded-xl p-5">
                    <h4 class="font-semibold text-dark dark:text-white mb-2">
                        Posted By
                    </h4>
                    <p class="text-body-color dark:text-dark-6">
                        {{ item.owner_name }}
                    </p>
                </div>

                <div class="bg-gray-1 dark:bg-dark rounded-xl p-5">
                    <h4 class="font-semibold text-dark dark:text-white mb-2">
                        Location
                    </h4>
                    <p class="text-body-color dark:text-dark-6">
                        {{ item.owner_hostel or "Campus" }}
                    </p>
                </div>

            </div>

            <!-- Swap Request Section -->
            {% if session.get('username') and item.owner_name != session.get('username') %}
            <div class="mt-10 border-t pt-8">

                <h3 class="text-xl font-bold text-dark dark:text-white mb-4">
                    Request a Swap
                </h3>

                <form action="{{ url_for('request_swap', item_id=item.id) }}"
                      method="POST"
                      class="space-y-4">

                    <textarea name="message"
                              rows="4"
                              placeholder="Explain why you'd like to swap this item..."
                              class="w-full px-4 py-3 border border-stroke dark:border-dark-3
                                     rounded-lg bg-gray-1 dark:bg-dark
                                     text-dark dark:text-white focus:ring-2
                                     focus:ring-primary focus:outline-none"></textarea>

                    <button type="submit"
                            class="px-6 py-3 bg-primary text-white font-semibold
                                   rounded-lg hover:bg-blue-dark transition">
                        Send Swap Request
                    </button>

                </form>

            </div>
            {% endif %}

        </div>
    </div>
</div>

{% endblock %}
